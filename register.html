<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Create Account — SL SMM PANEL</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --blue:#0d47a1;
    --blue-2:#1565c0;
    --bg:#f3f5f9;
    --card:#ffffff;
    --muted:#6b7280;
    --danger:#e53935;
    --radius:12px;
    --max-w:420px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial;
    background:linear-gradient(180deg,#eaf2ff 0%,var(--bg) 100%);
    color:#111827;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  .wrap{
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:36px 18px;
  }

  .card{
    width:100%;
    max-width:var(--max-w);
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:0 10px 30px rgba(13,71,161,0.08);
    padding:28px;
  }

  .brand{
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:10px;
  }
  .logo {
    width:46px;height:46px;border-radius:10px;
    background:linear-gradient(135deg,var(--blue),var(--blue-2));
    display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;
    font-size:18px;
  }
  h1{margin:0;font-size:20px}
  p.lead{margin:8px 0 18px;color:var(--muted);font-size:14px}

  form .row{display:flex;gap:10px}
  label{display:block;font-size:13px;color:#374151;margin-bottom:6px;font-weight:600}
  input[type="text"], input[type="email"], input[type="password"]{
    width:100%;
    padding:12px 12px;
    border-radius:8px;
    border:1px solid #e6e9ef;
    background:#fff;
    font-size:14px;
    outline:none;
    transition:box-shadow .15s, border-color .15s;
  }
  input:focus{box-shadow:0 6px 18px rgba(13,71,161,0.08);border-color:var(--blue-2)}

  .field{margin-bottom:14px}
  .note{font-size:13px;color:var(--muted);margin-top:8px}

  .actions{display:flex;flex-direction:column;gap:10px;margin-top:8px}
  button.submit{
    padding:12px 14px;
    border-radius:10px;
    border:0;
    background:var(--blue);
    color:#fff;
    font-weight:700;
    cursor:pointer;
    font-size:15px;
  }
  button.submit[disabled]{opacity:.6;cursor:not-allowed}

  .link-row{display:flex;justify-content:space-between;align-items:center;margin-top:6px;font-size:13px}
  a.small{color:var(--blue);text-decoration:none;font-weight:600}

  .error{color:var(--danger);font-size:13px;margin-top:6px}
  .success{color:green;font-size:13px;margin-top:6px}

  .footer{
    text-align:center;margin-top:16px;font-size:13px;color:var(--muted)
  }

  @media (max-width:420px){
    .card{padding:18px}
  }
</style>
</head>
<body>

<div class="wrap">
  <div class="card" role="main" aria-labelledby="signupTitle">
    <div class="brand">
      <div class="logo">SL</div>
      <div>
        <h1 id="signupTitle">Create your account</h1>
        <p class="lead">Join SL SMM Panel — register to order social services instantly.</p>
      </div>
    </div>

    <!-- !!! IMPORTANT: Update action to your backend if it's hosted elsewhere.
         If services.php is in same folder, keep as "services.php" -->
    <form id="registerForm" action="services.php" method="POST" novalidate>
      <!-- include this hidden input so services.php can detect register -->
      <input type="hidden" name="register" value="1">

      <div class="field">
        <label for="username">Username</label>
        <input id="username" name="username" type="text" placeholder="e.g. madusanka" required minlength="3" />
        <div id="uErr" class="error" style="display:none"></div>
      </div>

      <div class="field">
        <label for="email">Email address</label>
        <input id="email" name="email" type="email" placeholder="you@example.com" required />
        <div id="eErr" class="error" style="display:none"></div>
      </div>

      <div class="field">
        <label for="password">Password</label>
        <input id="password" name="password" type="password" placeholder="Choose a secure password" required minlength="6" />
      </div>

      <div class="field">
        <label for="password2">Confirm password</label>
        <input id="password2" type="password" placeholder="Repeat password" required />
        <div id="pErr" class="error" style="display:none"></div>
      </div>

      <div class="field">
        <label for="promo">Promo code (optional)</label>
        <input id="promo" name="promo" type="text" placeholder="Optional referral / promo" />
      </div>

      <div style="display:flex;align-items:center;gap:10px;margin-top:6px;">
        <input id="terms" name="terms" type="checkbox" style="width:18px;height:18px" />
        <label for="terms" style="margin:0;font-size:13px;color:var(--muted)">I agree to the <a href="#" class="small">Terms & Conditions</a></label>
      </div>

      <div class="actions">
        <button type="submit" id="submitBtn" class="submit">Create account</button>
        <div id="formMsg" aria-live="polite"></div>
      </div>

      <div class="link-row">
        <div style="color:var(--muted)">Already have an account?</div>
        <a class="small" href="login.html">Login</a>
      </div>
    </form>

    <div class="footer">By continuing you agree to our policies. © SL SMM PANEL</div>
  </div>
</div>

<script>
(function(){
  const form = document.getElementById('registerForm');
  const submitBtn = document.getElementById('submitBtn');
  const formMsg = document.getElementById('formMsg');
  const uErr = document.getElementById('uErr');
  const eErr = document.getElementById('eErr');
  const pErr = document.getElementById('pErr');
  const pw = document.getElementById('password');
  const pw2 = document.getElementById('password2');
  const terms = document.getElementById('terms');

  function resetErrors(){
    [uErr,eErr,pErr].forEach(el=>{ el.style.display='none'; el.textContent=''; });
    formMsg.textContent='';
  }

  form.addEventListener('submit', function(ev){
    resetErrors();
    ev.preventDefault();

    const username = form.username.value.trim();
    const email = form.email.value.trim();
    const password = pw.value;
    const password2 = pw2.value;
    const promo = form.promo.value.trim();

    let ok = true;
    if(username.length < 3){ uErr.textContent = 'Username must be at least 3 characters.'; uErr.style.display='block'; ok=false; }
    if(!/^\S+@\S+\.\S+$/.test(email)){ eErr.textContent = 'Enter a valid email address.'; eErr.style.display='block'; ok=false; }
    if(password.length < 6){ pErr.textContent = 'Password must be at least 6 characters.'; pErr.style.display='block'; ok=false; }
    else if(password !== password2){ pErr.textContent = 'Passwords do not match.'; pErr.style.display='block'; ok=false; }
    if(!terms.checked){ formMsg.innerHTML = '<span class="error">You must agree to the Terms & Conditions.</span>'; ok=false; }

    if(!ok) return;

    // disable button & show loading text
    submitBtn.disabled = true;
    submitBtn.textContent = 'Creating account...';

    // If your backend is on a different host and you want a direct redirect handled by server,
    // use normal form submit: form.submit(); return;
    // But here we use fetch to show friendly feedback (ensure CORS allowed if backend on other domain)

    const action = form.getAttribute('action') || 'services.php';
    const formData = new FormData();
    formData.append('register', '1');
    formData.append('username', username);
    formData.append('email', email);
    formData.append('password', password);
    if(promo) formData.append('promo', promo);

    // Use fetch for nicer UI. If your backend is on another domain, ensure it allows CORS.
    fetch(action, {
      method: 'POST',
      body: formData,
      credentials: 'include'
    })
    .then(r => r.text())
    .then(text => {
      // if services.php returns JSON, parse it; otherwise show message and redirect manually
      let okResp = false;
      try{
        const j = JSON.parse(text);
        if(j.success || j.status === 'ok' || j.message) {
          okResp = true;
          formMsg.innerHTML = '<span class="success">Registered successfully. Redirecting to login…</span>';
          setTimeout(()=> { window.location.href = 'login.html'; }, 1200);
        }
      }catch(e){
        // fallback: if response contains "success" or "order" keys in text OR login.html redirect needed
        if(/success|created|ok|user/i.test(text)){
          okResp = true;
          formMsg.innerHTML = '<span class="success">Registered successfully. Redirecting to login…</span>';
          setTimeout(()=> { window.location.href = 'login.html'; }, 1200);
        } else {
          // show server response for debugging (strip HTML tags)
          formMsg.innerHTML = '<div class="error">Registration failed: <pre style="white-space:pre-wrap; font-size:13px; color:#b91c1c">'+ text.replace(/</g,'&lt;').slice(0,700) +'</pre></div>';
        }
      }
      if(!okResp){
        submitBtn.disabled = false;
        submitBtn.textContent = 'Create account';
      }
    })
    .catch(err => {
      console.error(err);
      formMsg.innerHTML = '<div class="error">Network error. Try again later.</div>';
      submitBtn.disabled = false;
      submitBtn.textContent = 'Create account';
    });
  });
})();
</script>

</body>
</html>
